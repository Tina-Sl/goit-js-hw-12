{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/messanges-to-users.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '44698390-237f634988ff1cc21b0da43c0';\n\nexport default async function getImages(str, page, perPage) {\n  if (str.includes(' ')) {\n    str.replace(/\\s+/g, '+');\n  }\n\n  const searchParams = {\n    params: {\n      key: KEY,\n      q: str,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: perPage,\n    },\n  };\n  try {\n    const response = await axios.get(BASE_URL, searchParams);\n    return response.data;\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n","export default function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width=\"360\"\n            />\n          </a>\n          <div class=\"gallery-img-title\">\n            <div class=\"box\">\n              <h2 class=\"box-title\">Likes</h2>\n              <p class=\"box-number\">${likes}</p>\n            </div>\n            <div class=\"box\">\n              <h2 class=\"box-title\">Views</h2>\n              <p class=\"box-number\">${views}</p>\n            </div>\n            <div class=\"box\">\n              <h2 class=\"box-title\">Comments</h2>\n              <p class=\"box-number\">${comments}</p>\n            </div>\n            <div class=\"box\">\n              <h2 class=\"box-title\">Downloads</h2>\n              <p class=\"box-number\">${downloads}</p>\n            </div>\n          </div>\n        </li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction error() {\n  iziToast.error({\n    position: 'topRight',\n    theme: 'dark',\n    backgroundColor: '#FF0000',\n    messageSize: '20',\n    messageColor: '#FFFFFF',\n    message: 'no connection to the server',\n  });\n}\nfunction warning() {\n  iziToast.warning({\n    theme: 'dark',\n    backgroundColor: '#CD5C5C',\n    messageSize: '18',\n    messageColor: '#FFFFFF',\n    position: 'topRight',\n    message: 'Please enter a value in the search field!',\n  });\n}\nfunction info() {\n  iziToast.info({\n    messageSize: '16',\n    position: 'topRight',\n    messageColor: '#000000',\n    message: 'Sorry, there are no images matching your search query.',\n  });\n}\nfunction endOfSearch() {\n  iziToast.info({\n    backgroundColor: '#8FBC8F',\n    messageSize: '16',\n    position: 'bottomRight',\n    messageColor: '#000000',\n    timeout: 10000,\n    message: \"We're sorry, but you've reached the end of search results.\",\n    closeOnClick: true,\n  });\n}\nfunction success(totalPhotos, loadedPhotos) {\n  iziToast.success({\n    backgroundColor: '#F0FFFF',\n    messageSize: '16',\n    position: 'topRight',\n    message: `Loaded: ${loadedPhotos} (${totalPhotos})`,\n  });\n}\n\nexport { error, warning, info, endOfSearch, success };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport getImages from './js/pixabay-api.js';\nimport createMarkup from './js/render-functions.js';\nimport * as messanges from './js/messanges-to-users.js';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-wrapper');\nconst btnLoad = document.querySelector('.load-btn');\n\nconst PER_PAGE = 15;\nlet currentPage = 1;\nlet strSearch = '';\nlet heightCard = 0;\n\nform.addEventListener('submit', evt => {\n  evt.preventDefault();\n  btnLoad.classList.add('load-hidden');\n  gallery.innerHTML = '';\n  strSearch = evt.target.elements.search.value.trim();\n  if (strSearch === '') {\n    messanges.warning();\n    return;\n  }\n  currentPage = 1;\n  displayGallery(currentPage);\n  form.reset();\n});\n\nbtnLoad.addEventListener('click', () => {\n  btnLoad.classList.add('load-hidden');\n  currentPage += 1;\n  displayGallery(currentPage);\n});\n\nasync function displayGallery(currentPage) {\n  loader.classList.remove('loader-wrapper-hidden');\n  const data = await getImages(strSearch, currentPage, PER_PAGE);\n  loader.classList.add('loader-wrapper-hidden');\n\n  if (data == undefined) {\n    messanges.error();\n    return;\n  }\n  if (!data.hits.length) {\n    messanges.info();\n    return;\n  }\n  const totalHits = data.totalHits;\n  const loadImage =\n    PER_PAGE * currentPage <= totalHits ? PER_PAGE * currentPage : totalHits;\n  messanges.success(totalHits, loadImage);\n  gallery.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n\n  if (currentPage === 1 && totalHits > PER_PAGE) {\n    heightCard = Math.round(\n      document.querySelector('.gallery-item').getBoundingClientRect().height\n    );\n  } else {\n    window.scrollBy({\n      top: heightCard * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n  }\n\n  if (currentPage === Math.ceil(totalHits / PER_PAGE)) {\n    btnLoad.classList.add('load-hidden');\n    messanges.endOfSearch();\n  } else {\n    btnLoad.classList.remove('load-hidden');\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const backToTop = document.getElementById('back-to-top');\n\n  window.addEventListener('scroll', function () {\n    if (window.scrollY > 300) {\n      backToTop.style.display = 'block';\n    } else {\n      backToTop.style.display = 'none';\n    }\n  });\n  backToTop.addEventListener('click', function (event) {\n    event.preventDefault();\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  });\n});\n"],"names":["BASE_URL","KEY","getImages","str","page","perPage","searchParams","axios","error","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziToast","warning","info","endOfSearch","success","totalPhotos","loadedPhotos","form","gallery","loader","btnLoad","PER_PAGE","currentPage","strSearch","heightCard","evt","messanges.warning","displayGallery","data","messanges.error","messanges.info","totalHits","loadImage","messanges.success","SimpleLightbox","messanges.endOfSearch","backToTop","event"],"mappings":"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"}